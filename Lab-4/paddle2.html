<html>
<head>
  <meta charset="UTF-8">
  <title>Canvas</title>

  <style type="text/css">
    body {
      background-color: white;
    }
  </style>
  <h1>Andrew Coffey</h1>

</head>
<body>
  <canvas id="paddle-class" width="400" height="300" style="border:5px solid black"></canvas>

  <script type="text/javascript">
    // Gets a handle to the element with id canvasOne.
    var canvas = document.getElementById("paddle-class");
    // Get a 2D context for the canvas.
    var ctx = canvas.getContext("2d");
    //global variable for rotation of the X
    var R = 0;

    //class paddle
    class Paddle {
      constructor(X, Y, radius, YSpeed) {
        //attributes
        this.x = X;
        this.y = Y;
        this.r = radius;
        this.vy = YSpeed;
      }
      //draws the paddle
      drawPaddle() {

        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
        ctx.stroke();
      }
      //moves the paddle
      movePaddle() {

        //increments by user input
        this.y += this.vy;

        if (this.y + this.r > canvas.height || this.y - this.r < 0) {
          this.vy = this.vy * -1;
        }
        return this.y;
      }

    }
    //class for ball
    class MatchBall {

      constructor(X, Y, XSpeed, YSpeed, radius, Spin) {

        //attributes
        this.x = X;
        this.y = Y;
        this.dx = XSpeed;
        this.dy = YSpeed;
        this.r = radius;
        this.s = Spin;
      }
      //draws the ball
      drawBall() {

        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
        ctx.fill();

        var r = R * (Math.PI / 180);
        ctx.lineWidth = "2";
        ctx.fillStyle = "red";
        var x1 = this.x + (this.r * Math.cos(7 * Math.PI / 4 + r));
        var y1 = this.y + (this.r * Math.sin(7 * Math.PI / 4 + r));
        ctx.moveTo(x1, y1);
        var x2 = this.x + (this.r * Math.cos(3 * Math.PI / 4 + r));
        var y2 = this.y + (this.r * Math.sin(3 * Math.PI / 4 + r));
        ctx.lineTo(x2, y2);
        var x3 = this.x + (this.r * Math.cos(5 * Math.PI / 4 + r));
        var y3 = this.y + (this.r * Math.sin(5 * Math.PI / 4 + r));
        ctx.moveTo(x3, y3);
        var x4 = this.x + (this.r * Math.cos(1 * Math.PI / 4 + r));
        var y4 = this.y + (this.r * Math.sin(1 * Math.PI / 4 + r));
        ctx.lineTo(x4, y4);
        ctx.stroke();
      }
      //moves ball
      moveBall() {

        //increments by user input
        this.x += this.dx;
        this.y += this.dy;
        R += this.s;

        //Y borders
        if (this.y + this.r >= canvas.height || this.y - this.r <= 0) {
          this.dy = this.dy * -1;
        }
        //X borders
        if (this.x + this.r >= canvas.width || this.x - this.r <= 0) {
          this.dx = this.dx * -1;
        }

        //return variables
        return this.x;
        return this.y;
      }
    }
    //adds collision
    function collision(X1, Y1, X2, Y2, Distance) {
      this.x1 = X1;
      this.y1 = Y1;
      this.x2 = X2;
      this.y2 = Y2;
      this.d = Distance;

      //to determine x and y distance
      var a = y2 - y1;
      var b = x2 - x1;
      //terminal message t0 indicate collision
      if (Math.hypot(a, b) <= d) {
        console.log("Collision detected!");
      }
    }

    //object to define class paddle
    const Paddle1 = new Paddle(15, 15, 15, 2);
    const Ball1 = new MatchBall(30, 30, 3, 3, 15, 2);

    // A function to repeat every time the animation loops.
    function repeatme() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      //methods from class
      Paddle1.drawPaddle();
      Paddle1.movePaddle();
      Ball1.drawBall();
      Ball1.moveBall();

      //variable to define distance betweeen ball and paddle
      var d = Paddle1.r + Ball1.r;

      //collision function
      collision(Paddle1.x, Paddle1.y, Ball1.x, Ball1.y, d);


      window.requestAnimationFrame(repeatme);
    }

    

    // Get the animation going.
    repeatme();
  </script>

</body>

</html>